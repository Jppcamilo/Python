--------------------------------------------------------
-- 1. LIMPEZA TOTAL (Apaga tabelas antigas/erradas)
--------------------------------------------------------
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE CONVERSA_INDICA_CHALLENGE CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE NIVEL_USUARIO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE CONVERSA CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE CHALLENGE CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE CURSO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE PROFESSOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE NIVEL CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE USUARIO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL;
END;
/

--------------------------------------------------------
-- 2. CRIAÇÃO DAS TABELAS (DDL)
--------------------------------------------------------

-- USUARIO
CREATE TABLE USUARIO (
    ID_USUARIO NUMBER NOT NULL,
    NOME_USUARIO VARCHAR2(100) NOT NULL,
    EMAIL_USUARIO VARCHAR2(100) NOT NULL,
    SENHA_USUARIO VARCHAR2(100) NOT NULL,
    PLANO_USUARIO VARCHAR2(50) NOT NULL
);
ALTER TABLE USUARIO ADD CONSTRAINT PK_USUARIO PRIMARY KEY (ID_USUARIO);
ALTER TABLE USUARIO ADD CONSTRAINT UQ_USUARIO_EMAIL UNIQUE (EMAIL_USUARIO);
ALTER TABLE USUARIO ADD CONSTRAINT CK_USUARIO_PLANO CHECK (PLANO_USUARIO IN ('BRONZE', 'PRATA', 'OURO'));

-- PROFESSOR
CREATE TABLE PROFESSOR (
    ID_PROFESSOR NUMBER NOT NULL,
    NOME_PROFESSOR VARCHAR2(100) NOT NULL,
    ESPECIALIDADE_PROFESSOR VARCHAR2(100) NOT NULL,
    EMAIL_PROFESSOR VARCHAR2(100) NOT NULL,
    SENHA_PROFESSOR VARCHAR2(100) NOT NULL
);
ALTER TABLE PROFESSOR ADD CONSTRAINT PK_PROFESSOR PRIMARY KEY (ID_PROFESSOR);
ALTER TABLE PROFESSOR ADD CONSTRAINT UQ_PROFESSOR_EMAIL UNIQUE (EMAIL_PROFESSOR);

-- CURSO
CREATE TABLE CURSO (
    ID_CURSO NUMBER NOT NULL,
    ID_PROFESSOR NUMBER NOT NULL,
    NOME_CURSO VARCHAR2(100) NOT NULL,
    DESCRICAO_CURSO VARCHAR2(255)
);
ALTER TABLE CURSO ADD CONSTRAINT PK_CURSO PRIMARY KEY (ID_CURSO);
ALTER TABLE CURSO ADD CONSTRAINT FK_CURSO_PROFESSOR FOREIGN KEY (ID_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR);

-- CHALLENGE
CREATE TABLE CHALLENGE (
    ID_CHALLENGE NUMBER NOT NULL,
    ID_USUARIO NUMBER NOT NULL,
    ID_CURSO NUMBER NOT NULL,
    NOME_CHALLENGE VARCHAR2(100) NOT NULL,
    DESCRICAO_CHALLENGE VARCHAR2(255) NOT NULL
);
ALTER TABLE CHALLENGE ADD CONSTRAINT PK_CHALLENGE PRIMARY KEY (ID_CHALLENGE);
ALTER TABLE CHALLENGE ADD CONSTRAINT FK_CHALLENGE_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO);
ALTER TABLE CHALLENGE ADD CONSTRAINT FK_CHALLENGE_CURSO FOREIGN KEY (ID_CURSO) REFERENCES CURSO (ID_CURSO);

-- CONVERSA (USANDO CLOB PARA TEXTOS LONGOS)
CREATE TABLE CONVERSA (
    ID_CONVERSA VARCHAR2(100) NOT NULL,
    ID_USUARIO NUMBER NOT NULL,
    DATA_HORA_CONVERSA DATE NOT NULL,
    CONTEUDO_CONVERSA CLOB NOT NULL 
);
ALTER TABLE CONVERSA ADD CONSTRAINT PK_CONVERSA PRIMARY KEY (ID_CONVERSA);
ALTER TABLE CONVERSA ADD CONSTRAINT FK_CONVERSA_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO);

-- CONVERSA_INDICA_CHALLENGE
CREATE TABLE CONVERSA_INDICA_CHALLENGE (
    ID_CONVERSA_INDICA_CHALLENGE NUMBER NOT NULL,
    ID_CONVERSA VARCHAR2(100) NOT NULL,
    ID_CHALLENGE NUMBER NOT NULL
);
ALTER TABLE CONVERSA_INDICA_CHALLENGE ADD CONSTRAINT PK_CONV_INDICA_CHALLENGE PRIMARY KEY (ID_CONVERSA_INDICA_CHALLENGE);
ALTER TABLE CONVERSA_INDICA_CHALLENGE ADD CONSTRAINT FK_CONV_INDICA_CONVERSA FOREIGN KEY (ID_CONVERSA) REFERENCES CONVERSA (ID_CONVERSA);
ALTER TABLE CONVERSA_INDICA_CHALLENGE ADD CONSTRAINT FK_CONV_INDICA_CHALLENGE FOREIGN KEY (ID_CHALLENGE) REFERENCES CHALLENGE (ID_CHALLENGE);

-- NIVEL
CREATE TABLE NIVEL (
    ID_NIVEL NUMBER NOT NULL,
    NOME_NIVEL VARCHAR2(100) NOT NULL,
    DESCRICAO_NIVEL VARCHAR2(255) NOT NULL
);
ALTER TABLE NIVEL ADD CONSTRAINT PK_NIVEL PRIMARY KEY (ID_NIVEL);

-- NIVEL_USUARIO
CREATE TABLE NIVEL_USUARIO (
    ID_USUARIO NUMBER NOT NULL,
    ID_NIVEL NUMBER NOT NULL,
    DATA_HORA_NIVEL DATE NOT NULL
);
ALTER TABLE NIVEL_USUARIO ADD CONSTRAINT FK_NIVEL_USUARIO_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO);
ALTER TABLE NIVEL_USUARIO ADD CONSTRAINT FK_NIVEL_USUARIO_NIVEL FOREIGN KEY (ID_NIVEL) REFERENCES NIVEL (ID_NIVEL);

--------------------------------------------------------
-- 3. INSERÇÃO DE DADOS (DML) - SOFT SKILLS
--------------------------------------------------------

-- 1. USUÁRIO ADMIN (Login: admin@levelup.com / Senha: admin123)
INSERT INTO USUARIO (ID_USUARIO, NOME_USUARIO, EMAIL_USUARIO, SENHA_USUARIO, PLANO_USUARIO)
VALUES (99, 'Administrador', 'admin@levelup.com', '240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9', 'OURO');

-- Usuários Comuns
INSERT INTO USUARIO VALUES (1, 'Ana Silva', 'ana1@email.com', '123456', 'BRONZE');
INSERT INTO USUARIO VALUES (2, 'Bruno Costa', 'bruno2@email.com', '123456', 'PRATA');
INSERT INTO USUARIO VALUES (3, 'Carla Souza', 'carla3@email.com', '123456', 'OURO');
INSERT INTO USUARIO VALUES (4, 'Daniel Rocha', 'daniel@email.com', '123456', 'OURO');
INSERT INTO USUARIO VALUES (5, 'Elaine Melo', 'elaine5@email.com', '123456', 'PRATA');
INSERT INTO USUARIO VALUES (6, 'Fernando Lima', 'fernando6@email.com', '123456', 'BRONZE');
INSERT INTO USUARIO VALUES (7, 'Gabriela Pires', 'gabi7@email.com', '123456', 'OURO');
INSERT INTO USUARIO VALUES (8, 'Henrique Dias', 'henrique8@email.com', '123456', 'BRONZE');
INSERT INTO USUARIO VALUES (9, 'Isabela Ramos', 'isa9@email.com', '123456', 'PRATA');
INSERT INTO USUARIO VALUES (10, 'João Pedro', 'joao10@email.com', '123456', 'OURO');
INSERT INTO USUARIO VALUES (11, 'Karen Silva', 'karen11@email.com', '123456', 'BRONZE');
INSERT INTO USUARIO VALUES (12, 'Lucas Almeida', 'lucas12@email.com', '123456', 'PRATA');
INSERT INTO USUARIO VALUES (13, 'Mariana Souza', 'mari13@email.com', '123456', 'OURO');
INSERT INTO USUARIO VALUES (14, 'Nicolas Antunes', 'nico14@email.com', '123456', 'PRATA');
INSERT INTO USUARIO VALUES (15, 'Olivia Martins', 'oli15@email.com', '123456', 'BRONZE');

-- PROFESSORES (ESPECIALISTAS EM SOFT SKILLS)
INSERT INTO PROFESSOR VALUES (1, 'Prof. André', 'Comunicação', 'andre@prof.com', '123345');
INSERT INTO PROFESSOR VALUES (2, 'Prof. Beatriz', 'Liderança', 'bia@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (3, 'Prof. Carlos', 'Inteligência Emocional', 'carlos@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (4, 'Prof. Diana', 'Trabalho em Equipe', 'diana@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (5, 'Prof. Eduardo', 'Resolução de Conflitos', 'edu@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (6, 'Prof. Fernanda', 'Gestão de Tempo', 'fer@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (7, 'Prof. Gustavo', 'Criatividade', 'gus@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (8, 'Prof. Helena', 'Negociação', 'helena@prof.com', '123');
INSERT INTO PROFESSOR VALUES (9, 'Prof. Igor', 'Adaptabilidade', 'igor@prof.com', '123');
INSERT INTO PROFESSOR VALUES (10, 'Prof. Julia', 'Ética', 'julia@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (11, 'Prof. Kleber', 'Pensamento Crítico', 'kleber@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (12, 'Prof. Larissa', 'Empatia', 'larissa@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (13, 'Prof. Marcelo', 'Oratória', 'marcelo@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (14, 'Prof. Nathalia', 'Resiliência', 'nathalia@prof.com', '123456');
INSERT INTO PROFESSOR VALUES (15, 'Prof. Otávio', 'Feedback', 'otavio@prof.com', '123456');

-- CURSOS (SOFT SKILLS)
INSERT INTO CURSO VALUES (1, 1, 'Comunicação Assertiva', 'Fale com clareza e confiança');
INSERT INTO CURSO VALUES (2, 2, 'Liderança Servidora', 'Como inspirar times');
INSERT INTO CURSO VALUES (3, 3, 'Controle Emocional', 'Gerindo sentimentos no trabalho');
INSERT INTO CURSO VALUES (4, 4, 'Colaboração Efetiva', 'Trabalhando melhor em grupo');
INSERT INTO CURSO VALUES (5, 5, 'Mediação de Conflitos', 'Transformando brigas em soluções');
INSERT INTO CURSO VALUES (6, 6, 'Produtividade Máxima', 'Faça mais em menos tempo');
INSERT INTO CURSO VALUES (7, 7, 'Thinking Outside the Box', 'Inovação na prática');
INSERT INTO CURSO VALUES (8, 8, 'Arte da Negociação', 'Ganhando o sim');
INSERT INTO CURSO VALUES (9, 9, 'Gestão de Mudanças', 'Como se adaptar rápido');
INSERT INTO CURSO VALUES (10, 10, 'Ética Corporativa', 'Valores no ambiente de trabalho');
INSERT INTO CURSO VALUES (11, 11, 'Tomada de Decisão', 'Análise lógica de problemas');
INSERT INTO CURSO VALUES (12, 12, 'Escuta Ativa', 'Entendendo o outro verdadeiramente');
INSERT INTO CURSO VALUES (13, 13, 'Falar em Público', 'Perca o medo do palco');
INSERT INTO CURSO VALUES (14, 14, 'Gestão de Estresse', 'Mantendo a calma sob pressão');
INSERT INTO CURSO VALUES (15, 15, 'Cultura de Feedback', 'Como dar e receber críticas');

-- CHALLENGES (TAREFAS COMPORTAMENTAIS)
INSERT INTO CHALLENGE VALUES (1, 99, 1, 'Desafio do Espelho', 'Treine seu discurso no espelho por 2 min.');
INSERT INTO CHALLENGE VALUES (2, 99, 2, 'Delegar Tarefa', 'Identifique uma tarefa para delegar hoje.');
INSERT INTO CHALLENGE VALUES (3, 99, 3, 'Diário de Emoções', 'Anote 3 momentos que te irritaram hoje.');
INSERT INTO CHALLENGE VALUES (4, 99, 4, 'Elogio Sincero', 'Elogie o trabalho de um colega.');
INSERT INTO CHALLENGE VALUES (5, 99, 5, 'Ouvinte Atento', 'Escute alguém por 5 min sem interromper.');
INSERT INTO CHALLENGE VALUES (6, 99, 6, 'Técnica Pomodoro', 'Foque 25 min sem celular.');
INSERT INTO CHALLENGE VALUES (7, 99, 7, 'Ideia Maluca', 'Escreva 5 usos novos para um clipe de papel.');
INSERT INTO CHALLENGE VALUES (8, 99, 8, 'Troca de Favor', 'Negocie uma troca de tarefas em casa.');
INSERT INTO CHALLENGE VALUES (9, 99, 9, 'Nova Rota', 'Faça um caminho diferente para o trabalho.');
INSERT INTO CHALLENGE VALUES (10, 99, 10, 'Dilema Ético', 'Analise um caso de ética nas notícias.');
INSERT INTO CHALLENGE VALUES (11, 99, 11, '5 Porquês', 'Use a técnica dos 5 porquês num problema.');
INSERT INTO CHALLENGE VALUES (12, 99, 12, 'Mapa da Empatia', 'Descreva o dia de alguém diferente de você.');
INSERT INTO CHALLENGE VALUES (13, 99, 13, 'Gravar Vídeo', 'Grave um vídeo de 1 min se apresentando.');
INSERT INTO CHALLENGE VALUES (14, 99, 14, 'Respiração Guiada', 'Faça 3 minutos de respiração profunda.');
INSERT INTO CHALLENGE VALUES (15, 99, 15, 'Pedir Feedback', 'Pergunte a alguém um ponto de melhoria seu.');

-- CONVERSAS (Exemplos)
INSERT INTO CONVERSA VALUES ('C1',1, SYSDATE,'Dúvida sobre comunicação.');
INSERT INTO CONVERSA VALUES ('C2',2, SYSDATE,'Como liderar melhor?');
INSERT INTO CONVERSA VALUES ('C3',3, SYSDATE,'Estou muito ansioso.');
INSERT INTO CONVERSA VALUES ('C4',4, SYSDATE,'Meu time não colabora.');
INSERT INTO CONVERSA VALUES ('C5',5, SYSDATE,'Briguei com meu chefe.');
INSERT INTO CONVERSA VALUES ('C6',6, SYSDATE,'Não tenho tempo pra nada.');
INSERT INTO CONVERSA VALUES ('C7',7, SYSDATE,'Preciso ter ideias novas.');
INSERT INTO CONVERSA VALUES ('C8',8, SYSDATE,'Quero pedir um aumento.');
INSERT INTO CONVERSA VALUES ('C9',9, SYSDATE,'A empresa mudou tudo.');
INSERT INTO CONVERSA VALUES ('C10',10, SYSDATE,'O que é certo fazer?');
INSERT INTO CONVERSA VALUES ('C11',11, SYSDATE,'Não sei o que escolher.');
INSERT INTO CONVERSA VALUES ('C12',12, SYSDATE,'Ninguém me escuta.');
INSERT INTO CONVERSA VALUES ('C13',13, SYSDATE,'Tenho vergonha de falar.');
INSERT INTO CONVERSA VALUES ('C14',14, SYSDATE,'Estou quase explodindo.');
INSERT INTO CONVERSA VALUES ('C15',15, SYSDATE,'Como saber se fui bem?');

-- CONVERSA_INDICA_CHALLENGE
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (1,'C1',1);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (2,'C2',2);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (3,'C3',3);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (4,'C4',4);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (5,'C5',5);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (6,'C6',6);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (7,'C7',7);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (8,'C8',8);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (9,'C9',9);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (10,'C10', 10);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (11,'C11', 11);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (12,'C12',12);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (13,'C13', 13);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (14,'C14',14);
INSERT INTO CONVERSA_INDICA_CHALLENGE VALUES (15,'C15',15);

-- NIVEIS
INSERT INTO NIVEL VALUES (1,'Iniciante','Começando agora');
INSERT INTO NIVEL VALUES (2,'Aprendiz','Primeiros passos');
INSERT INTO NIVEL VALUES (3,'Intermediário','Entendendo conceitos');
INSERT INTO NIVEL VALUES (4,'Avançado','Alta proficiência');
INSERT INTO NIVEL VALUES (5,'Especialista','Domina o tema');
INSERT INTO NIVEL VALUES (6,'Bronze','Nível bronzeado');
INSERT INTO NIVEL VALUES (7,'Prata','Nível prata');
INSERT INTO NIVEL VALUES (8,'Ouro','Nível ouro');
INSERT INTO NIVEL VALUES (9,'Platina','Nível platina');
INSERT INTO NIVEL VALUES (10,'Diamante','Nível diamante');
INSERT INTO NIVEL VALUES (11,'Master','Nível mestre');
INSERT INTO NIVEL VALUES (12,'Pro','Nível profissional');
INSERT INTO NIVEL VALUES (13,'Elite','Nível elite');
INSERT INTO NIVEL VALUES (14,'Supremo','Nível supremo');
INSERT INTO NIVEL VALUES (15,'Lendário','Nível lendário');

-- NIVEL_USUARIO (Histórico Inicial)
-- Admin começa como Especialista
INSERT INTO NIVEL_USUARIO VALUES (99, 5, SYSDATE); 
-- Usuários comuns
INSERT INTO NIVEL_USUARIO VALUES (1,1,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (2,2,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (3,3,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (4,4,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (5,5,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (6,6,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (7,7,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (8,8,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (9,9,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (10,10,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (11,11, SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (12,12,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (13,13,SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (14,14, SYSDATE);
INSERT INTO NIVEL_USUARIO VALUES (15,15, SYSDATE);

COMMIT;